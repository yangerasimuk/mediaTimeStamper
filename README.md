# mediaTimestamper
Консольная программа для macOS для массового переименования фото/видео и зависимых файлов.

## Немного истории
Я очень люблю фотографировать, и не только я один - моя семья фотает всё показавшиеся интересным или достойным сохранения в нашей семейной истории. Всего у нас есть одна любительская зеркалка, три телефона и два планшета. Фотографии я храню на дисках в самолично созданных папках, сторонние программы каталогизации и хранения избегаю.

Зачем я загружая фотки в одну папку? Мне нравится смотреть на событие со всех сторон, в смысле через все доступные стекла. Предположим, у вас случился день езды и вы снимали несколькими фотиками, вполне логично, что все фотки объединены одной темой и окажутся в одной папке.

Всё было прекрасно, до того момента когда сохраняя фотографии в одной папке у меня пересеклись наименования разных файлов, и я чуть не потерял свои "бесценные" снимки.

Я немного подумал, ознакомился с опытом других людей и решил, добавлять к имени файла, временную метку, таким образом, получалось следующее:

DSC_2987.JPG -> 2017-01-20_21-40-15_DSC_2987.JPG

Данный способ организации фото мне очень понравился, ведь теперь файловые менеджеры автоматически формировали сортировку по имени фото, что позволяло просматривать фото из разных источников в "едином потоке". 

Посмотрите на эти 2 списка, какой из них будет более удобным для просмотра:
* DSC_2987.JPG
* DSC_2988.JPG
* DSC_2989.JPG
* DSC_2990.JPG
* IMG_0182.JPG
* IMG_0183.JPG
* IMG_0184.JPG

или

* 2017-01-20_18-33-30_IMG_0182.JPG
* 2017-01-20_21-40-15_DSC_2987.JPG
* 2017-01-20_21-45-25_DSC_2988.JPG
* 2017-01-20_21-46-55_DSC_2989.JPG
* 2017-01-20_22-05-13_IMG_0183.JPG
* 2017-01-20_22-06-47_IMG_0184.JPG


Вы скажете, что в любой программе работающей с файлами, можно сортировать по датам создания и модификации уже тысячу лет как. На что я отвечу, что не раз сталкивался с перебиванием данных атрибутов при коприровании на разные хранилища (сетевые диски, NAS...). Прямо сейчас, перед моими глазами сотни файлов с датой создания равной 2000-01-01 00:00:00.

Обычно я переименовывал файлы используя одну из профессиональных программ, до тех пор, пока не обратил внимание, что приложение не переименовывает видео-файлы, а также зависимые от фотографий файлы, как например, .AAE (фильтры, эффекты). Я поискал в интернете готовые решения для мака, но нашел только навороченную платную программу. Что и сподвигло меня к написанию собственной программы.

## Решение
Итак, есть проблема - неуникальные называния для фото-файлов. Оптимальным решением данной проблемы видится добавление к исходному имени файла, уникального значения - времени создания фотографии. Большинство современных камер сохраняет информацию о создании фото в метаданных EXIF, при недоступности метаданных будет использована временная метка из аттрибутов файла.

## Установка
mediaTimestamper - консольная программа для macOS, обрабатывающая файлы в текущей папке. Чтобы она работала в произвольной папке, необходимо либо поместить в неё саму программу, либо разместить её в одну из общедоступных папок, например, /usr/local/bin. При сборке программы из XCode, исполняемый файл будет автоматически скопирован в usr/local/bin.


## Работа
Для запуска программы откройте консоль (Terminal), перейдите в папку с фотографиями и введите mtstamper.

### Командная строка
mtstamper - программа запустится с настройками по-умолчанию (вывод только статистики, исходные файлы будут удалены),

mtstamper -i или --info - вывод дополнительной информации,

mtstamper -t или --test - исходные файлы будут сохранены,

mtstamper -it или --info --test - вывод подробной информации и удаление исходных данных.

### Производительность
Довольно сложно говорить насколько быстро программа обработает ваш массив данных. Лучше приведу пример реальной производительности программы на моих данных:

1. Данные: 1000 фотографий, 2,5Gb. Окружение: MacBook Pro с SSD. Время: 1 минута.
2. Данные: 800 фотографий, 3,5Gb. Окружение: MacBook Pro с SSD. Время: 2 минуты.
3. Данные: 4600 фотографий, 6Gb. Окружение: MacBook Pro с SSD. Время: 3 минуты.
4. Данные: 1800 фото, 6Gb. Apple Macbook Pro с SSD и флешка SanDisk 64Gb, sdxc, 10, 3. Время: 18 минут.


### Обрабатываемые файлы
Программа переименовывает файлы с исходными именами и следующийми расширениями: фото (.jpeg, .jpg, .png, .gif), видео (.mov, .mpeg, .mp4, .avi) и зависимые файлы (.aae, .ytags). Ничего более обратывать не будет.

gl hf

Ян Герасимук

8 февраля 2017 г.